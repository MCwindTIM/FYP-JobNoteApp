{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from \"react\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport TouchableNativeFeedback from \"react-native-web/dist/exports/TouchableNativeFeedback\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport RefreshControl from \"react-native-web/dist/exports/RefreshControl\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport SearchBar from \"../../components/SearchBar\";\nimport ClearInput from \"../../components/ClearInput\";\nimport { AuthContext } from \"../../components/context\";\nimport AvatarImage from \"../../components/Avatar\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar styles = StyleSheet.create({\n  parent: {\n    marginLeft: 0,\n    marginRight: 0,\n    borderRadius: 0,\n    borderWidth: 0,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\"\n  },\n  container: {\n    flex: 1,\n    paddingTop: 0,\n    backgroundColor: \"#fff\"\n  },\n  item: {\n    padding: 10,\n    fontSize: 18,\n    height: 66\n  },\n  title: {\n    fontSize: 20\n  },\n  author: {\n    fontSize: 15\n  },\n  merge: {\n    flexDirection: \"row\",\n    alignItems: \"center\",\n    paddingLeft: 5\n  }\n});\n\nvar JobFlatList = function JobFlatList(_ref) {\n  var navigation = _ref.navigation;\n\n  var _React$useState = React.useState(true),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isLoading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      searchText = _useState4[0],\n      setSearchText = _useState4[1];\n\n  var _React$useContext = React.useContext(AuthContext),\n      getAPIServiceURL = _React$useContext.getAPIServiceURL;\n\n  var APIServiceURL = getAPIServiceURL();\n  useEffect(function () {\n    var refreshListener = navigation.addListener(\"focus\", function (payload) {\n      fetch(APIServiceURL + \"/getAllJobData\").then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        setData(json);\n      }).catch(function (error) {\n        return console.error(error);\n      }).finally(function () {\n        setLoading(false);\n      });\n    });\n    return refreshListener;\n  }, [navigation]);\n\n  var openScreen = function openScreen(route) {\n    navigation.navigate(\"JobDetails\", route);\n  };\n\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsxs(View, {\n      style: styles.parent,\n      children: [_jsx(SearchBar, {\n        clearButtonMode: \"always\",\n        label: \"Search\",\n        returnKeyType: \"next\",\n        value: searchText,\n        onChangeText: function onChangeText(text) {\n          return setSearchText(text);\n        }\n      }), Platform.OS !== \"ios\" ? _jsx(ClearInput, {\n        onPress: function onPress() {\n          setSearchText(\"\");\n          Keyboard.dismiss();\n        }\n      }) : null]\n    }), _jsx(FlatList, {\n      data: data.data,\n      keyExtractor: function keyExtractor(_ref2, index) {\n        var _id = _ref2._id;\n        return _id;\n      },\n      renderItem: function renderItem(_ref3) {\n        var item = _ref3.item;\n\n        if (searchText === \"\") {\n          return _jsx(TouchableNativeFeedback, {\n            onPress: function onPress() {\n              return openScreen(item);\n            },\n            children: _jsxs(View, {\n              style: styles.merge,\n              children: [_jsx(View, {\n                children: _jsx(AvatarImage, {\n                  size: 40,\n                  uri: item.AuthorAvatar\n                })\n              }), _jsxs(View, {\n                style: styles.item,\n                children: [_jsx(Text, {\n                  style: styles.title,\n                  children: decodeURIComponent(item.Title)\n                }), _jsx(Text, {\n                  style: styles.author,\n                  children: decodeURIComponent(item.Author)\n                })]\n              })]\n            })\n          });\n        }\n\n        if (item.Title.toUpperCase().includes(encodeURIComponent(searchText.toUpperCase())) || item.Author.toUpperCase().includes(encodeURIComponent(searchText.toUpperCase()))) {\n          return _jsx(TouchableNativeFeedback, {\n            onPress: function onPress() {\n              return openScreen(item);\n            },\n            children: _jsxs(View, {\n              style: styles.merge,\n              children: [_jsx(View, {\n                children: _jsx(AvatarImage, {\n                  size: 40,\n                  uri: item.AuthorAvatar\n                })\n              }), _jsxs(View, {\n                style: styles.item,\n                children: [_jsx(Text, {\n                  style: styles.title,\n                  children: decodeURIComponent(item.Title)\n                }), _jsx(Text, {\n                  style: styles.author,\n                  children: decodeURIComponent(item.Author)\n                })]\n              })]\n            })\n          });\n        }\n      },\n      refreshControl: _jsx(RefreshControl, {\n        refreshing: isLoading,\n        onRefresh: function onRefresh() {\n          setLoading(true);\n          fetch(APIServiceURL + \"/getAllJobData\").then(function (response) {\n            return response.json();\n          }).then(function (json) {\n            setData(json);\n          }).catch(function (error) {\n            return console.error(error);\n          }).finally(function () {\n            return setLoading(false);\n          });\n        }\n      })\n    })]\n  });\n};\n\nexport default JobFlatList;","map":{"version":3,"sources":["D:/VTC files/Github/Assignment/fyp/ReactNative/JobApp/navigation/util/FlatList.js"],"names":["React","useEffect","useState","SearchBar","ClearInput","AuthContext","AvatarImage","styles","StyleSheet","create","parent","marginLeft","marginRight","borderRadius","borderWidth","flexDirection","justifyContent","container","flex","paddingTop","backgroundColor","item","padding","fontSize","height","title","author","merge","alignItems","paddingLeft","JobFlatList","navigation","isLoading","setLoading","data","setData","searchText","setSearchText","useContext","getAPIServiceURL","APIServiceURL","refreshListener","addListener","payload","fetch","then","response","json","catch","error","console","finally","openScreen","route","navigate","text","Platform","OS","Keyboard","dismiss","index","_id","AuthorAvatar","decodeURIComponent","Title","Author","toUpperCase","includes","encodeURIComponent"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport {\r\n    TouchableWithoutFeedback,\r\n    TouchableNativeFeedback,\r\n    SafeAreaView,\r\n    FlatList,\r\n    StyleSheet,\r\n    Text,\r\n    View,\r\n    ActivityIndicator,\r\n    RefreshControl,\r\n    TouchableOpacity,\r\n    Keyboard,\r\n    Platform,\r\n} from \"react-native\";\r\n\r\nimport SearchBar from \"../../components/SearchBar\";\r\nimport ClearInput from \"../../components/ClearInput\";\r\n\r\nimport { AuthContext } from \"../../components/context\";\r\n\r\nimport AvatarImage from \"../../components/Avatar\";\r\n\r\nconst styles = StyleSheet.create({\r\n    parent: {\r\n        marginLeft: 0,\r\n        marginRight: 0,\r\n        borderRadius: 0,\r\n        borderWidth: 0,\r\n        flexDirection: \"row\",\r\n        justifyContent: \"space-between\",\r\n    },\r\n    container: {\r\n        flex: 1,\r\n        paddingTop: 0,\r\n        backgroundColor: \"#fff\",\r\n    },\r\n    item: {\r\n        padding: 10,\r\n        fontSize: 18,\r\n        height: 66,\r\n    },\r\n    title: {\r\n        fontSize: 20,\r\n    },\r\n    author: {\r\n        fontSize: 15,\r\n    },\r\n    merge: {\r\n        flexDirection: \"row\",\r\n        alignItems: \"center\",\r\n        paddingLeft: 5,\r\n    },\r\n});\r\nconst JobFlatList = ({ navigation }) => {\r\n    const [isLoading, setLoading] = React.useState(true);\r\n    const [data, setData] = useState([]);\r\n    const [searchText, setSearchText] = useState(\"\");\r\n    const { getAPIServiceURL } = React.useContext(AuthContext);\r\n    const APIServiceURL = getAPIServiceURL();\r\n    useEffect(() => {\r\n        const refreshListener = navigation.addListener(\"focus\", (payload) => {\r\n            fetch(`${APIServiceURL}/getAllJobData`)\r\n                .then((response) => response.json())\r\n                .then((json) => {\r\n                    setData(json);\r\n                })\r\n                .catch((error) => console.error(error))\r\n                .finally(() => {\r\n                    setLoading(false);\r\n                });\r\n        });\r\n        return refreshListener;\r\n    }, [navigation]);\r\n\r\n    //function to open JobDetails Screen (item is a parameter contain prop)\r\n    const openScreen = (route) => {\r\n        navigation.navigate(\"JobDetails\", route);\r\n    };\r\n\r\n    return (\r\n        <View style={styles.container}>\r\n            <View style={styles.parent}>\r\n                <SearchBar\r\n                    clearButtonMode=\"always\"\r\n                    label=\"Search\"\r\n                    returnKeyType=\"next\"\r\n                    value={searchText}\r\n                    onChangeText={(text) => setSearchText(text)}\r\n                />\r\n                {Platform.OS !== \"ios\" ? (\r\n                    <ClearInput\r\n                        onPress={() => {\r\n                            setSearchText(\"\");\r\n                            Keyboard.dismiss();\r\n                        }}\r\n                    />\r\n                ) : null}\r\n            </View>\r\n            <FlatList\r\n                data={data.data}\r\n                keyExtractor={({ _id }, index) => _id}\r\n                renderItem={({ item }) => {\r\n                    //render the list\r\n                    if (searchText === \"\") {\r\n                        return (\r\n                            <TouchableNativeFeedback\r\n                                onPress={() => openScreen(item)}\r\n                            >\r\n                                <View style={styles.merge}>\r\n                                    <View>\r\n                                        <AvatarImage\r\n                                            size={40}\r\n                                            uri={item.AuthorAvatar}\r\n                                        ></AvatarImage>\r\n                                    </View>\r\n                                    <View style={styles.item}>\r\n                                        <Text style={styles.title}>\r\n                                            {decodeURIComponent(item.Title)}\r\n                                        </Text>\r\n                                        <Text style={styles.author}>\r\n                                            {decodeURIComponent(item.Author)}\r\n                                        </Text>\r\n                                    </View>\r\n                                </View>\r\n                            </TouchableNativeFeedback>\r\n                        );\r\n                    }\r\n                    if (\r\n                        item.Title.toUpperCase().includes(\r\n                            encodeURIComponent(searchText.toUpperCase())\r\n                        ) ||\r\n                        item.Author.toUpperCase().includes(\r\n                            encodeURIComponent(searchText.toUpperCase())\r\n                        )\r\n                    ) {\r\n                        return (\r\n                            <TouchableNativeFeedback\r\n                                onPress={() => openScreen(item)}\r\n                            >\r\n                                <View style={styles.merge}>\r\n                                    <View>\r\n                                        <AvatarImage\r\n                                            size={40}\r\n                                            uri={item.AuthorAvatar}\r\n                                        ></AvatarImage>\r\n                                    </View>\r\n                                    <View style={styles.item}>\r\n                                        <Text style={styles.title}>\r\n                                            {decodeURIComponent(item.Title)}\r\n                                        </Text>\r\n                                        <Text style={styles.author}>\r\n                                            {decodeURIComponent(item.Author)}\r\n                                        </Text>\r\n                                    </View>\r\n                                </View>\r\n                            </TouchableNativeFeedback>\r\n                        );\r\n                    }\r\n                }}\r\n                refreshControl={\r\n                    <RefreshControl\r\n                        refreshing={isLoading}\r\n                        onRefresh={() => {\r\n                            setLoading(true);\r\n                            fetch(`${APIServiceURL}/getAllJobData`)\r\n                                .then((response) => response.json())\r\n                                .then((json) => {\r\n                                    setData(json);\r\n                                })\r\n                                .catch((error) => console.error(error))\r\n                                .finally(() => setLoading(false));\r\n                        }}\r\n                    />\r\n                }\r\n            />\r\n        </View>\r\n    );\r\n};\r\n\r\nexport default JobFlatList;\r\n"]},"metadata":{},"sourceType":"module"}